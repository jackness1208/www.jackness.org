version: 2
jobs:
  build:
    docker:
      - image: jackness1208/yyl:latest

    filters:
      branches:
        only: master

    working_directory: ~/

    steps:
      - add_ssh_keys:
        fingerprints:
          - "94:f5:9c:ec:49:b8:92:ad:18:10:16:55:49:f8:e5:a6"
      - run: git clone https://github.com/jackness1208/www.jackness.org.git
      - run: cd www.jackness.org
      - run: ls -a
      - run: yyl all --config www.jackness.org/yyl.config.js --isCommit --logLevel 2
      - run: scp www.jackness.org/dist jackness@114.215.151.192:/www/www.jackness.org
